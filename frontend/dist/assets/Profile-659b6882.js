import{L as X}from"./Layout-cffebef8.js";import{a as Y,r as x,i as Z,c as s,o as $,j as ee,w as t,e as o,f as e,t as f,k as E,h as c,E as m,z}from"./index-fedfb087.js";import{g as te}from"./diet-5bd19ab0.js";import{_ as le}from"./_plugin-vue_export-helper-c27b6911.js";const oe={class:"profile-page"},se={style:{"background-color":"transparent",padding:"20px"}},ne={class:"profile-info",style:{"text-align":"center"}},ae={class:"avatar-section",style:{"margin-bottom":"16px"}},ie={style:{"margin-top":"12px"}},de={class:"user-id",style:{color:"#888"}},re={class:"info-item",style:{"margin-bottom":"8px"}},ue={class:"info-item",style:{"margin-bottom":"8px"}},pe={class:"info-item"},_e={style:{"background-color":"transparent",padding:"20px"}},fe={style:{"background-color":"transparent",padding:"20px"}},me={style:{display:"flex","align-items":"center",width:"100%","min-width":"0"}},ce={style:{"font-size":"32px",color:"#1890ff","margin-right":"12px","flex-shrink":"0"}},ye={style:{display:"flex","flex-direction":"column",overflow:"hidden","min-width":"0"}},we={style:{margin:"0","font-weight":"bold","font-size":"24px","line-height":"1.4","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},ge={style:{display:"flex","align-items":"center",width:"100%","min-width":"0"}},he={style:{"font-size":"32px",color:"#1890ff","margin-right":"12px","flex-shrink":"0"}},xe={style:{display:"flex","flex-direction":"column",overflow:"hidden","min-width":"0"}},ve={style:{margin:"0","font-weight":"bold","font-size":"24px","line-height":"1.4","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},be={style:{display:"flex","align-items":"center",width:"100%","min-width":"0"}},Ve={style:{"font-size":"32px",color:"#1890ff","margin-right":"12px","flex-shrink":"0"}},ke={style:{display:"flex","flex-direction":"column",overflow:"hidden","min-width":"0"}},Pe={style:{margin:"0","font-weight":"bold","font-size":"24px","line-height":"1.4","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},De={style:{display:"flex","align-items":"center",width:"100%","min-width":"0"}},Ce={style:{"font-size":"32px",color:"#1890ff","margin-right":"12px","flex-shrink":"0"}},Ee={style:{display:"flex","flex-direction":"column",overflow:"hidden","min-width":"0"}},ze={style:{margin:"0","font-weight":"bold","font-size":"24px","line-height":"1.4","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},Be={style:{"background-color":"transparent",padding:"20px"}},Ue={class:"data-actions"},We={class:"account-actions"},Re={__name:"Profile",setup(Se){const b=Y(),B=x("2024-01-15"),U=x("2024-01-20 14:30"),a=x({dailyCalories:2e3,dailyExercise:30,dailySleep:8,dailyWater:2e3,weeklyExerciseDays:5,targetWeight:65}),g=x({usageDays:0,dietRecords:0,exerciseRecords:0,sleepRecords:0}),i=x({currentPassword:"",newPassword:"",confirmPassword:""}),W=()=>{m.success("健康目标保存成功")},R=()=>{a.value={dailyCalories:2e3,dailyExercise:30,dailySleep:8,dailyWater:2e3,weeklyExerciseDays:5,targetWeight:65},m.info("目标已重置为默认值")},S=()=>{if(!i.value.currentPassword||!i.value.newPassword){m.warning("请填写完整的密码信息");return}if(i.value.newPassword!==i.value.confirmPassword){m.error("两次输入的新密码不一致");return}m.success("密码修改成功"),i.value={currentPassword:"",newPassword:"",confirmPassword:""}},M=()=>{m.success("数据导出成功")},T=async()=>{try{await z.confirm("确定要清空所有健康数据吗？此操作不可恢复！","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),m.success("数据已清空")}catch{}},I=async()=>{try{await z.confirm("确定要删除账户吗？此操作不可恢复！","危险操作",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"error"}),m.success("账户已删除"),b.logout()}catch{}},F=async()=>{try{const l=await te(1,{days:7});g.value.dietRecords=l.data.total_records}catch(V){console.error("获取饮食统计失败:",V)}};return Z(()=>{F()}),(V,l)=>{const G=s("el-avatar"),P=s("el-divider"),L=s("el-tag"),p=s("a-card"),r=s("a-col"),y=s("el-input-number"),d=s("el-form-item"),_=s("el-col"),v=s("el-row"),N=s("Check"),u=s("el-icon"),w=s("el-button"),A=s("Refresh"),D=s("el-form"),h=s("a-row"),j=s("Calendar"),q=s("Food"),H=s("Bicycle"),J=s("Moon"),k=s("el-input"),K=s("Download"),O=s("Delete"),Q=s("Warning");return $(),ee(X,null,{default:t(()=>[o("div",oe,[o("div",se,[e(h,{gutter:16,style:{display:"flex"}},{default:t(()=>[e(r,{span:24},{default:t(()=>[e(h,{gutter:16},{default:t(()=>[e(r,{xs:24,md:8},{default:t(()=>[e(p,{title:"个人信息",style:{height:"100%"}},{default:t(()=>{var n,C;return[o("div",ne,[o("div",ae,[e(G,{size:100,icon:"User"}),o("h3",ie,f((n=E(b).user)==null?void 0:n.username),1),o("p",de,"用户ID: "+f((C=E(b).user)==null?void 0:C.id),1)]),e(P,{style:{margin:"16px 0"}}),o("div",re,[l[9]||(l[9]=o("label",null,"注册时间:",-1)),o("span",null,f(B.value),1)]),o("div",ue,[l[10]||(l[10]=o("label",null,"最后登录:",-1)),o("span",null,f(U.value),1)]),o("div",pe,[l[12]||(l[12]=o("label",null,"账户状态:",-1)),e(L,{type:"success"},{default:t(()=>l[11]||(l[11]=[c("正常",-1)])),_:1,__:[11]})])])]}),_:1})]),_:1}),e(r,{xs:24,md:16},{default:t(()=>[e(p,{title:"健康目标设置",style:{height:"100%"}},{default:t(()=>[e(D,{model:a.value,"label-width":"120px"},{default:t(()=>[e(v,{gutter:20},{default:t(()=>[e(_,{span:12},{default:t(()=>[e(d,{label:"每日卡路里目标"},{default:t(()=>[e(y,{modelValue:a.value.dailyCalories,"onUpdate:modelValue":l[0]||(l[0]=n=>a.value.dailyCalories=n),min:1e3,max:5e3},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{span:12},{default:t(()=>[e(d,{label:"每日运动时长"},{default:t(()=>[e(y,{modelValue:a.value.dailyExercise,"onUpdate:modelValue":l[1]||(l[1]=n=>a.value.dailyExercise=n),min:10,max:300},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(v,{gutter:20},{default:t(()=>[e(_,{span:12},{default:t(()=>[e(d,{label:"每日睡眠时长"},{default:t(()=>[e(y,{modelValue:a.value.dailySleep,"onUpdate:modelValue":l[2]||(l[2]=n=>a.value.dailySleep=n),min:6,max:12,precision:1},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{span:12},{default:t(()=>[e(d,{label:"每日饮水量"},{default:t(()=>[e(y,{modelValue:a.value.dailyWater,"onUpdate:modelValue":l[3]||(l[3]=n=>a.value.dailyWater=n),min:500,max:5e3},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(v,{gutter:20},{default:t(()=>[e(_,{span:12},{default:t(()=>[e(d,{label:"每周运动天数"},{default:t(()=>[e(y,{modelValue:a.value.weeklyExerciseDays,"onUpdate:modelValue":l[4]||(l[4]=n=>a.value.weeklyExerciseDays=n),min:1,max:7},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{span:12},{default:t(()=>[e(d,{label:"体重目标"},{default:t(()=>[e(y,{modelValue:a.value.targetWeight,"onUpdate:modelValue":l[5]||(l[5]=n=>a.value.targetWeight=n),min:30,max:200,precision:1},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(d,null,{default:t(()=>[e(w,{type:"primary",onClick:W},{default:t(()=>[e(u,null,{default:t(()=>[e(N)]),_:1}),l[13]||(l[13]=c(" 保存目标 ",-1))]),_:1,__:[13]}),e(w,{onClick:R},{default:t(()=>[e(u,null,{default:t(()=>[e(A)]),_:1}),l[14]||(l[14]=c(" 重置 ",-1))]),_:1,__:[14]})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),o("div",_e,[e(h,{gutter:16,style:{display:"flex"}},{default:t(()=>[e(r,{span:24},{default:t(()=>[e(p,{title:"健康数据概览",style:{height:"100%"}},{default:t(()=>[o("div",fe,[e(h,{gutter:16,style:{display:"flex"}},{default:t(()=>[e(r,{xs:12,sm:12,md:6,style:{height:"100px"}},{default:t(()=>[e(p,{bordered:!1,style:{height:"100%",display:"flex","align-items":"center","min-width":"0"}},{default:t(()=>[o("div",me,[o("div",ce,[e(u,null,{default:t(()=>[e(j)]),_:1})]),o("div",ye,[l[15]||(l[15]=o("h4",{style:{margin:"0","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}," 使用天数 ",-1)),o("p",we,f(g.value.usageDays)+" 天 ",1)])])]),_:1})]),_:1}),e(r,{xs:12,sm:12,md:6,style:{height:"100px"}},{default:t(()=>[e(p,{bordered:!1,style:{height:"100%",display:"flex","align-items":"center","min-width":"0"}},{default:t(()=>[o("div",ge,[o("div",he,[e(u,null,{default:t(()=>[e(q)]),_:1})]),o("div",xe,[l[16]||(l[16]=o("h4",{style:{margin:"0","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}," 记录饮食 ",-1)),o("p",ve,f(g.value.dietRecords)+" 次 ",1)])])]),_:1})]),_:1}),e(r,{xs:12,sm:12,md:6,style:{height:"100px"}},{default:t(()=>[e(p,{bordered:!1,style:{height:"100%",display:"flex","align-items":"center","min-width":"0"}},{default:t(()=>[o("div",be,[o("div",Ve,[e(u,null,{default:t(()=>[e(H)]),_:1})]),o("div",ke,[l[17]||(l[17]=o("h4",{style:{margin:"0","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}," 记录运动 ",-1)),o("p",Pe,f(g.value.exerciseRecords)+" 次 ",1)])])]),_:1})]),_:1}),e(r,{xs:12,sm:12,md:6,style:{height:"100px"}},{default:t(()=>[e(p,{bordered:!1,style:{height:"100%",display:"flex","align-items":"center","min-width":"0"}},{default:t(()=>[o("div",De,[o("div",Ce,[e(u,null,{default:t(()=>[e(J)]),_:1})]),o("div",Ee,[l[18]||(l[18]=o("h4",{style:{margin:"0","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}," 记录睡眠 ",-1)),o("p",ze,f(g.value.sleepRecords)+" 次 ",1)])])]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1})]),o("div",Be,[e(h,{gutter:16,style:{display:"flex"}},{default:t(()=>[e(r,{span:24},{default:t(()=>[e(p,{title:"账户设置",style:{height:"100%"}},{default:t(()=>[e(v,{gutter:20},{default:t(()=>[e(_,{span:12},{default:t(()=>[l[20]||(l[20]=o("h4",null,"修改密码",-1)),e(D,{model:i.value,"label-width":"100px"},{default:t(()=>[e(d,{label:"当前密码"},{default:t(()=>[e(k,{modelValue:i.value.currentPassword,"onUpdate:modelValue":l[6]||(l[6]=n=>i.value.currentPassword=n),type:"password","show-password":"",placeholder:"请输入当前密码"},null,8,["modelValue"])]),_:1}),e(d,{label:"新密码"},{default:t(()=>[e(k,{modelValue:i.value.newPassword,"onUpdate:modelValue":l[7]||(l[7]=n=>i.value.newPassword=n),type:"password","show-password":"",placeholder:"请输入新密码"},null,8,["modelValue"])]),_:1}),e(d,{label:"确认密码"},{default:t(()=>[e(k,{modelValue:i.value.confirmPassword,"onUpdate:modelValue":l[8]||(l[8]=n=>i.value.confirmPassword=n),type:"password","show-password":"",placeholder:"请再次输入新密码"},null,8,["modelValue"])]),_:1}),e(d,null,{default:t(()=>[e(w,{type:"primary",onClick:S},{default:t(()=>l[19]||(l[19]=[c(" 修改密码 ",-1)])),_:1,__:[19]})]),_:1})]),_:1},8,["model"])]),_:1,__:[20]}),e(_,{span:12},{default:t(()=>[l[24]||(l[24]=o("h4",null,"数据管理",-1)),o("div",Ue,[e(w,{type:"warning",onClick:M},{default:t(()=>[e(u,null,{default:t(()=>[e(K)]),_:1}),l[21]||(l[21]=c(" 导出数据 ",-1))]),_:1,__:[21]}),e(w,{type:"danger",onClick:T},{default:t(()=>[e(u,null,{default:t(()=>[e(O)]),_:1}),l[22]||(l[22]=c(" 清空数据 ",-1))]),_:1,__:[22]})]),e(P),l[25]||(l[25]=o("h4",null,"账户操作",-1)),o("div",We,[e(w,{type:"danger",onClick:I},{default:t(()=>[e(u,null,{default:t(()=>[e(Q)]),_:1}),l[23]||(l[23]=c(" 删除账户 ",-1))]),_:1,__:[23]})])]),_:1,__:[24,25]})]),_:1})]),_:1})]),_:1})]),_:1})])])]),_:1})}}},Ge=le(Re,[["__scopeId","data-v-c62cd5ef"]]);export{Ge as default};
