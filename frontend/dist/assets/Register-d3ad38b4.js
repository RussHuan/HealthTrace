import{u as b,a as R,r as _,b as k,c as i,o as P,d as h,e as l,f as s,w as t,g as C,h as p,E as g}from"./index-fedfb087.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";const z={class:"register-container"},U={class:"register-card"},q={class:"register-footer"},B={__name:"Register",setup(F){const c=b(),w=R(),u=_(),m=_(!1),r=k({username:"",password:"",confirmPassword:""}),v={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],confirmPassword:[{required:!0,validator:(a,e,o)=>{e===""?o(new Error("请再次输入密码")):e!==r.password?o(new Error("两次输入密码不一致")):o()},trigger:"blur"}]},f=async()=>{if(u.value)try{await u.value.validate(),m.value=!0;const a=await w.register({username:r.username,password:r.password});a.success?(g.success(a.message),c.push("/login")):g.error(a.message)}catch{g.error("注册失败，请检查输入信息")}finally{m.value=!1}};return(a,e)=>{const o=i("el-input"),d=i("el-form-item"),V=i("el-button"),x=i("el-form"),y=i("router-link");return P(),h("div",z,[l("div",U,[e[6]||(e[6]=l("div",{class:"register-header"},[l("h1",null,"HealthTrace"),l("p",null,"创建新账户")],-1)),s(x,{ref_key:"registerFormRef",ref:u,model:r,rules:v,class:"register-form",onSubmit:C(f,["prevent"])},{default:t(()=>[s(d,{prop:"username"},{default:t(()=>[s(o,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=n=>r.username=n),placeholder:"用户名",size:"large","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),s(d,{prop:"password"},{default:t(()=>[s(o,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=n=>r.password=n),type:"password",placeholder:"密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(d,{prop:"confirmPassword"},{default:t(()=>[s(o,{modelValue:r.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=n=>r.confirmPassword=n),type:"password",placeholder:"确认密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(d,null,{default:t(()=>[s(V,{type:"primary",size:"large",class:"register-button",loading:m.value,onClick:f},{default:t(()=>e[3]||(e[3]=[p(" 注册 ",-1)])),_:1,__:[3]},8,["loading"])]),_:1})]),_:1},8,["model"]),l("div",q,[l("p",null,[e[5]||(e[5]=p(" 已有账号？ ",-1)),s(y,{to:"/login",class:"login-link"},{default:t(()=>e[4]||(e[4]=[p("立即登录",-1)])),_:1,__:[4]})])])])])}}},M=E(B,[["__scopeId","data-v-819591cd"]]);export{M as default};
